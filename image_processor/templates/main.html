{% extends "base.html" %}

{% block title %}Main Page{% endblock %}

{% block content %}
    <div class="row">
        <!-- Filter Effects Options (Left Column) -->
        <div style="margin-left: -300px" class="col-md-auto">
            <h2>Choose Filter Effect:</h2>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filter_effect" id="gaussian" value="gaussian">
                    <label class="form-check-label" for="gaussian">
                        Gaussian Blur
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filter_effect" id="box" value="box">
                    <label class="form-check-label" for="box">
                        Box Blur
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filter_effect" id="unsharp" value="unsharp">
                    <label class="form-check-label" for="unsharp">
                        Unsharp Mask
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filter_effect" id="median" value="median">
                    <label class="form-check-label" for="median">
                        Median Filter
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filter_effect" id="min" value="min">
                    <label class="form-check-label" for="min">
                        Min Filter
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="filter_effect" id="max" value="max">
                    <label class="form-check-label" for="max">
                        Max Filter
                    </label>
                </div>
                <button type="submit" class="btn btn-primary mt-4">Upload and Process</button>
            </form>
        </div>

        <!-- Image Display (Right Column) -->
        <div style="margin-left: 50px" class="col-md-8">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                    {{ form.image.label_tag }}
                    {{ form.image }}
                </div>
            </form>

            <!-- Display selected image -->
            <div class="mt-4" id="selected-image-container" style="display: none;">
                <h2>Selected Image</h2>
                <img id="selected-image" class="img-fluid" alt="Selected Image">
            </div>
        </div>
    </div>

    <!-- JavaScript to display the selected image -->
    <script>
        const inputImage = document.querySelector('#id_image');
        const selectedImageContainer = document.querySelector('#selected-image-container');
        const selectedImage = document.querySelector('#selected-image');

        inputImage.addEventListener('change', () => {
            const file = inputImage.files[0];
            if (file) {
                selectedImageContainer.style.display = 'block';
                const imageUrl = URL.createObjectURL(file);
                selectedImage.src = imageUrl;
            } else {
                selectedImageContainer.style.display = 'none';
                selectedImage.src = '';
            }
        });
    </script>
{% endblock %}
